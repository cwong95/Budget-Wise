<main class="dashboard-page">
    <section class="header-section">
        <h1 class="page-title">BudgetWise Dashboard</h1>
        <p class="description">Your central hub for budget tracking and bill management.</p>
    </section>

    {{#if error}}
    <section class="error-section">
        <p class="error-message">ðŸ›‘ {{error}}</p>
    </section>
    {{/if}}

    <hr>

    <h2>ðŸ“ŠBudget Tracking Summaries</h2>
    <p>Track your spending against your goals. <a href="/budgets">Manage Budgets</a></p>

    {{#if budgetSummaries.length}}
        <section class="budget-tracking-list">
            {{#each budgetSummaries}}
                <div class="budget-card">
                    <h3>{{this.category}} Budget ({{formatDate this.startDate}} - {{formatDate this.endDate}})</h3>

                    <div class="tracking-stats">
                        <p><strong>Limit:</strong> ${{this.amountLimitFormatted}}</p>
                        <p><strong>Spent:</strong> ${{this.amountUsedFormatted}}</p>
                        <p><strong>Remaining:</strong> ${{this.amountRemainingFormatted}}</p>
                    </div>

                    <div class="progress-bar-container">
                        <div
                            class="progress-bar"
                            style="width: {{this.percentageUsed}}%;"
                            title="{{this.percentageUsedRounded}}% Used"
                        ></div>
                    </div>

                <p class="percentage-used-text">
                    {{this.percentageUsedRounded}}% of budget used
                </p>
            </div>
        {{/each}}
    </section>
  {{else}}
    <p>You have no active budgets being tracked. Please <a href="/budgets">set one up</a>!</p>
  {{/if}}

  <hr>

  <h2>Upcoming Bills & Utilities </h2>
  {{#if utilitySummary}}
    <section class="utility-summary-card">
        <p>Utility data will be displayed here, showing how many bills are paid, due, or upcoming.</p>
    </section>
  {{/if}}
</main>