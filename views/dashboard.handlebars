<main class="dashboard-page">
    <section class="header-section">
        <h1 class="page-title">BudgetWise Dashboard</h1>
        <p class="description">Your central hub for budget tracking and bill management.</p>
    </section>

    {{#if error}}
    <section class="error-section">
        <p class="error-message">ğŸ›‘{{error}}</p>
    </section>
    {{/if}}

    <hr>

    <h2>ğŸ“ŠBudget Tracking Summaries</h2>
    <p>Track your spending against your goals. <a href="/budgets">Manage Budgets</a></p>

    {{#if budgetSummaries}}
        <section class="budget-tracking-list">
            {{#each budgetSummaries}}
                <div class="budget-card">
                    <h3>{{this.category}} Budget ({{formatDate this.startDate}} - {{formatDate this.endDate}})</h3>

                    <div class="tracking-stats">
                        <p><strong>Limit:</strong> ${{formatMoney this.amountLimit}}</p>
                        <p><strong>Spent:</strong> ${{formatMoney this.amountUsed}}</p>
                        <p><strong>Remaining:</strong> ${{formatMoney this.amountRemaining}}</p>
                    </div>

                    <div class="progress-bar-container">
                        <div
                            class="progress-bar"
                            style="width: {{this.percentageUsed}}%;"
                            title="{{formatMoney this.percentageUsed}}% Used"
                        ></div>
                    </div>

                <p class="percentage-used-text">
                    {{formatMoney this.percentageUsed}}% of budget used
                </p>
            </div>
        {{/each}}
    </section>
{{else}}
    <p>You have no active budgets being tracked. Please <a href="/budgets">set one up</a>!</p>
{{/if}}

<hr>

<h2>ğŸ“Œ Upcoming Bills & Utilities</h2>
{{#if utilitySummary}}
  <section class="utility-summary-card">
    <h3>Utility Bill Status Overview</h3>
    <div class="utility-summary-stats">
      <div class="summary-item">
        <span class="status-badge status-paid">Paid</span>
        <span class="summary-count">{{utilitySummary.paid}}</span>
      </div>
      <div class="summary-item">
        <span class="status-badge status-due">Due Today</span>
        <span class="summary-count">{{utilitySummary.due}}</span>
      </div>
      <div class="summary-item">
        <span class="status-badge status-upcoming">Upcoming</span>
        <span class="summary-count">{{utilitySummary.upcoming}}</span>
      </div>
      <div class="summary-item">
        <span class="status-badge status-overdue">Overdue</span>
        <span class="summary-count">{{utilitySummary.overdue}}</span>
      </div>
      <div class="summary-item total">
        <strong>Total Bills:</strong> {{utilitySummary.total}}
      </div>
    </div>

    <div class="utility-progress-bar">
      <div
        class="utility-progress-paid"
        style="width: {{calcPercent utilitySummary.paid utilitySummary.total}}%;"
        title="{{calcPercent utilitySummary.paid utilitySummary.total}}% Paid"
      ></div>
      <div
        class="utility-progress-due"
        style="width: {{calcPercent utilitySummary.due utilitySummary.total}}%;"
        title="{{calcPercent utilitySummary.due utilitySummary.total}}% Due"
      ></div>
      <div
        class="utility-progress-upcoming"
        style="width: {{calcPercent utilitySummary.upcoming utilitySummary.total}}%;"
        title="{{calcPercent utilitySummary.upcoming utilitySummary.total}}% Upcoming"
      ></div>
      <div
        class="utility-progress-overdue"
        style="width: {{calcPercent utilitySummary.overdue utilitySummary.total}}%;"
        title="{{calcPercent utilitySummary.overdue utilitySummary.total}}% Overdue"
      ></div>
    </div>

    <p class="utility-summary-note">
      Track and manage all your utilities in one place. <a href="/utilities">Go to Utilities</a>
    </p>
  </section>
{{else}}
  <p>No utility bills found.</p>
{{/if}}


<hr>

<hr>

<h2>ğŸ”” Reminders</h2>
{{#if reminders.length}}
  <section class="utility-summary-card">
    <h3>Upcoming notifications</h3>
    <ul class="reminders-inline">
      {{#each reminders}}
        <li>
          {{#if (eq this.type "on")}}ğŸ“… Due today{{else}}â³ Before due{{/if}} â€”
          {{formatDate this.reminderDate}}
          {{#if this.sent}} âœ…{{else}} â³{{/if}}
        </li>
      {{/each}}
    </ul>
    <p><a href="/reminders">View all reminders</a></p>
  </section>
{{else}}
  <p>No reminders scheduled yet.</p>
{{/if}}



</main>