<main class="transaction-page">

    {{#if error}}
    <div class="alert alert-danger">{{error}}</div>
    {{/if}}

    <h2>Add Transaction</h2>

    <form action="/transactions" method="POST">
        <div class="form-group">
            <label for="title">Title</label>
            <input class="form-control" id="title" type="text" name="title" required>
        </div>

        <div class="form-group">
            <label for="amount">Amount</label>
            <input class="form-control" id="amount" type="number" name="amount" required>
        </div>

        <div class="form-group">
            <label for="category">Category</label>
            <input class="form-control" id="category" type="text" name="category" required>
        </div>

        <div class="form-group">
            <label for="type">Type</label>
            <select class="form-control" id="type" name="type" required>
                <option value="Expense">Expense</option>
                <option value="Income">Income</option>
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input class="form-control" id="date" type="date" name="date" required>
        </div>

        <div class="form-group">
            <label for="notes">Notes</label>
            <textarea class="form-control" id="notes" name="notes"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Add Transaction</button>
    </form>

    <hr>

    <h2>All Transactions</h2>

    {{#if transactions.length}}
    <ul class="list-group">
        {{#each transactions}}
        <li class="list-group-item">
            <div class="transaction-details">
                <div class="trans-title"><strong>{{this.title}}</strong></div>
                <div class="trans-meta">
                    <span class="trans-amount {{#if this.isIncome}}income{{else}}expense{{/if}}">${{formatMoney this.amount}}</span>
                    <span class="trans-category">&nbsp;(&nbsp;{{this.category}}&nbsp;)</span>
                    <span class="trans-type">&nbsp;-&nbsp;{{this.type}}</span>
                    <span class="trans-date">&nbsp;-&nbsp;{{this.dateFormatted}}</span>
                </div>
            </div>

            <div class="transaction-actions">
                <a href="/transactions/edit/{{this._id}}" class="btn btn-sm btn-warning">Edit</a>
                <form action="/transactions/delete/{{this._id}}" method="POST" style="display:inline; margin:0;">
                    <button class="btn btn-sm btn-danger" type="submit">Delete</button>
                </form>
            </div>
        </li>
        {{/each}}
    </ul>
    {{else}}
    <p>No transactions found.</p>
    {{/if}}

</main>
<script src="/js/transactions-form.js"></script>
